{% extends 'store/base.html' %}
{% block content %}
{% include "store/nav.html" %}

{% load static %}
{% load crispy_forms_tags %}

<div class="row mt-2">
    <div class="col-lg-3">
        <div class="sticky-top" style="top: 70px">
            <div class="card border-0">
                <div align="center" class="customer-profile">
                    <br>
                    <img width="120" height="120" background="#777" color="#777"
                         class="rounded-circle customer-image img-fluid" src="{{ user.customer_pics.url }}">
                    <h5>Hi, {{ user }}
                    </h5>
                    <!--                    {{ user.customer_pics.url|filesizeformat }}-->
                    <p class="text-truncate">{{ user.email }}</p>
                </div>
                <ul class="customer-nav list-group">
                    <a href="{% url 'user-post' user.username %}"
                       class="d-flex justify-content-between align-items-center list-group-item">
                        <span>
                        <svg style="opacity: 0.7" width="1.5em" height="1.5em" viewBox="0 0 16 16"
                             class="bi bi-shop mb-1 mr-1"
                             fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                  d="M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.371 2.371 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976l2.61-3.045zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0zM1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5zM4 15h3v-5H4v5zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3zm3 0h-2v3h2v-3z"/>
                        </svg>
                        My Store
                        </span>
                    </a>
                    <a href="{% url 'update-info' %}"
                       class="d-flex justify-content-between align-items-center active list-group-item">
                        <span>
                            <svg style="opacity: 0.7" width="1.5em" height="1.5em" viewBox="0 0 16 16"
                                 class="bi bi-pencil-square float-righ mb-1 mr-1"
                                 fill="currentColor"
                                 xmlns="http://www.w3.org/2000/svg">
                                    <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                    <path fill-rule="evenodd"
                                          d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                                </svg>

                                Update Info
                        </span>
                    </a>
                    <a href="{% url 'update_store' %}"
                       class="d-flex justify-content-between align-items-center list-group-item">
                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" style="opacity: 0.7" width="1.5em" height="1.5em"
                                 fill="currentColor" class="bi bi-nut" viewBox="0 0 16 16">
                              <path fill-rule="evenodd"
                                    d="M11.42 2H4.58L1.152 8l3.428 6h6.84l3.428-6-3.428-6zM4.58 1a1 1 0 0 0-.868.504l-3.429 6a1 1 0 0 0 0 .992l3.429 6A1 1 0 0 0 4.58 15h6.84a1 1 0 0 0 .868-.504l3.428-6a1 1 0 0 0 0-.992l-3.428-6A1 1 0 0 0 11.42 1H4.58z"/>
                              <path fill-rule="evenodd"
                                    d="M6.848 5.933a2.5 2.5 0 1 0 2.5 4.33 2.5 2.5 0 0 0-2.5-4.33zM5.067 9.848a3.5 3.5 0 1 1 6.062-3.5 3.5 3.5 0 0 1-6.062 3.5z"/>
                            </svg>

                                Update Store
                        </span>
                    </a>
                    <!--                    <a href="{% url 'customer-orders' %}"-->
                    <!--                       class="d-flex justify-content-between align-items-center list-group-item">-->
                    <!--                        <span>-->
                    <!--                            <svg style="opacity: 0.7" width="1.5em" height="1.5em" viewBox="0 0 16 16"-->
                    <!--                                 class="bi bi-archive mb-1 mr-1"-->
                    <!--                                 fill="currentColor" xmlns="http://www.w3.org/2000/svg">-->
                    <!--                                <path fill-rule="evenodd"-->
                    <!--                                      d="M0 2a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1v7.5a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 1 12.5V5a1 1 0 0 1-1-1V2zm2 3v7.5A1.5 1.5 0 0 0 3.5 14h9a1.5 1.5 0 0 0 1.5-1.5V5H2zm13-3H1v2h14V2zM5 7.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/>-->
                    <!--                            </svg>-->

                    <!--                            All Orders-->
                    <!--                        </span>-->
                    <!--                    </a>-->
                    {% if request.user.vendor %}
                    {% if request.user.has_paid %}
                    <a href="{% url 'store-create' %}"
                       class="d-flex justify-content-between align-items-center list-group-item">
                            <span>
                                <svg style="opacity: 0.7" width="1.5em" height="1.5em" viewBox="0 0 16 16"
                                     class="bi bi-unlock-fill float-righ mb-1 mr-1"
                                     fill="currentColor"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M.5 9a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9z"/>
                                    <path fill-rule="evenodd"
                                          d="M8.5 4a3.5 3.5 0 1 1 7 0v3h-1V4a2.5 2.5 0 0 0-5 0v3h-1V4z"/>
                                </svg>

                                Become a vendor
                            </span>
                    </a>
                    {% else %}
                    <a href="{% url 'subscription' %}"
                       class="d-flex justify-content-between align-items-center list-group-item">
                            <span>
                                <svg style="opacity: 0.7" width="1.5em" height="1.5em" viewBox="0 0 16 16"
                                     class="bi bi-lock-fill float-righ mb-1 mr-1"
                                     fill="currentColor"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M2.5 9a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9z"/>
                                    <path fill-rule="evenodd"
                                          d="M4.5 4a3.5 3.5 0 1 1 7 0v3h-1V4a2.5 2.5 0 0 0-5 0v3h-1V4z"/>
                                </svg>

                                Become a vendor
                            </span>
                    </a>
                    {% endif %}
                    {% else %}
                    <a href="{% url 'create_store' %}"
                       class="d-flex justify-content-between align-items-center list-group-item">
                            <span>
                                <svg style="opacity: 0.7" width="1.5em" height="1.5em" viewBox="0 0 16 16"
                                     class="bi bi-lock-fill float-righ mb-1 mr-1"
                                     fill="currentColor"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M2.5 9a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9z"/>
                                    <path fill-rule="evenodd"
                                          d="M4.5 4a3.5 3.5 0 1 1 7 0v3h-1V4a2.5 2.5 0 0 0-5 0v3h-1V4z"/>
                                </svg>
                                Become a vendor
                            </span>
                    </a>
                    {% endif %}
                    <a href="{% url 'user_follower_view' %}"
                       class="d-flex justify-content-between align-items-center list-group-item">
                        <span>
                        <svg xmlns="http://www.w3.org/2000/svg" style="opacity: 0.7" width="1.5em" height="1.5em"
                             fill="currentColor" class="bi bi-person-lines-fill" viewBox="0 0 16 16">
                          <path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"/>
                        </svg>
                        Followers & Followings
                        </span>
                    </a>
                </ul>
            </div>
        </div>
        <br>

    </div>
    <div class="col-lg-9 mb-2 mt-2" style="">
        <div class="box-element"
             style="overflow:auto;background-image:url('{% static 'images/corner-4.png' %}');background-position: right; border-top-right-radius: .375rem;">

            <div class="tab">
                <button class="tablinks" onclick="openCity(event, 'London')" id="defaultOpen">
                    <b>Customers Orders ({{ customers_orders.count }})</b>
                </button>
                <button class="tablinks" onclick="openCity(event, 'Paris')">
                    <b style="
                        display: flex;
                        flex-direction: column;">Products List ({{ total_product }})</b>
                </button>
                <!--                <button class="tablinks" onclick="openCity(event, 'Tokyo')">Tokyo</button>-->
            </div>

            <div id="London" class="tabcontent">

                <table class="table table-hover">
                    <thead>
                    <tr>
                        <!--                            <th>S.N.</th>-->
                        <th>Name</th>
                        <th>Phone</th>
                        <th>Location</th>
                        <th>Product</th>
                        <th>Quantity</th>
                        <th>Date</th>
                        <th>Status</th>
                        <th>Option</th>
                    </tr>
                    </thead>
                    <tbody>

                    {% for p in customers_orders %}
                    {% if p.order.complete %}
                    <tr>
                        <!--                            <td>-->
                        <!--                                {{ forloop.counter }}-->
                        <!--                            </td>-->
                        <td>
                            {% if p.customer.first_name %}
                            {{ p.customer.first_name }}
                            {% else %}
                            {{ p.customer }}
                            {% endif %}
                        </td>
                        <td>{{ p.customer.phone_number }}</td>
                        <td>{{ p.customer.location }}</td>
                        <td>{{ p.product }}</td>
                        <td>{{ p.quantity }}</td>
                        <td>{{ p.date_added }} + 01:00</td>
                        <td>
                            {% if p.status == 'Delivered' %}
                            <b><span class="btn btn-sm btn-info">Delivered</span></b>
                            {% else %}
                            <b><span class="btn btn-sm btn-secondary">Pending</span></b>
                            {% endif %}
                        </td>

                        <td>
                            <b><a href="{% url 'update_store_del' p.id %}"
                                  class="btn btn-sm btn-outline-info">Update</a></b>
                        </td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                    </tbody>
                </table>
            </div>

            <div id="Paris" class="tabcontent">

                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th>P.Id</th>
                        <th>Image</th>
                        <th>Product</th>
                        <th>Price</th>
                        <th>Action</th>
                        <th>Purchase</th>
                        <th>Uploaded</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for product in products %}


                    <tr>
                        <td>{{ product.id }}</td>
                        <td>
                            <a href="{% url 'store-detail' product.pk %}">
                                <img height="80px" width="80px" src="{{ product.image.url }}" alt="">
                            </a>
                        </td>
                        <td>{{ product.name }}</td>
                        <td>₦{{ product.price|floatformat:2 }}</td>
                        <th>
                            <a href="{% url 'store-delete' product.id %}"
                               class="btn btn-outline-danger btn-sm ">Delete</a>
                            <a href="{% url 'store-update' product.id %}"
                               class="btn btn-outline-info btn-sm">Update</a>
                        </th>
                        <th>{{ product.orderitem_set.count }}</th>
                        <th>{{ product.date|date }}</th>
                        <!--                        <th>{{ product.get_customer_ }}</th>-->
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

            <!--            <div id="Tokyo" class="tabcontent">-->
            <!--                <h3>Tokyo</h3>-->
            <!--                <p>Tokyo is the capital of Japan.</p>-->
            <!--            </div>-->
        </div>

    </div>

</div>
<style>

.customer-image {
    max-width: 10rem;
    margin-bottom: 1rem;
    padding: .5rem;
    background: #fff;
}
.rounded-circle {
    border-radius: 50%!important;
}

.customer-nav a {
    text-decoration: none;
    background-color: transparent;
}
.customer-nav a:hover {
    background-color: #f8f9fa;
}
.customer-nav .list-group-item.active {
    border-color: #dee2e6;
    background: #dee2e6;
    color: #212529;
}
.list-group-item+.list-group-item.active {
    margin-top: -1px;
    border-top-width: 1px;
}
.customer-nav .list-group-item {
    color: #495057;
    border-color: #e9ecef;
}
.list-group-item+.list-group-item {
    border-top-width: 0;
}
.list-group-item.active {
    color: #fff;
    background-color: #bcac76;
    border-color: #bcac76;
}
.align-items-center {
    align-items: center!important;
}
.justify-content-between {
    justify-content: space-between!important;
}
.d-flex {
    display: flex!important;
}

.list-group-item {
    position: relative;
    display: block;
    padding: .75rem 1.25rem;
    background-color: #fff;
    border: 1px solid rgba(0,0,0,.075);
}

ul {
    display: block;
    list-style-type: disc;

    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: 40px;
}
.customer-profile {
    padding: 1rem;
    text-align: center;
    background: #f8f9fa;
}

.card {
    box-shadow: 0 2px 1rem rgba(0,0,0,.15);
}
.border-0 {
    border: 0!important;
}
.card {
    position: relative;
    display: -webkit-flex;
    display: flex;
    -webkit-flex-direction: column;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: #fff;
    background-clip: border-box;
    border: 0 solid transparent;
    border-radius: 5px;
}









</style>

<style>

/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: transparent;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: .3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
<!--.tab button:hover {-->
<!--  background-color: #ddd;-->
<!--}-->

/* Create an active/current tablink class */
.tab button.active {
  background-color: #007bff !important;
  color: #fff;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}





</style>

<script>
function openCity(evt, cityName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
}








</script>
<script>
// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();








</script>
{% endblock content %}
